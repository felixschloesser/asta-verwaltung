{% extends "keys/base.html" %}

{% block title %}{{ person.get_full_name }} | Person | Schlüsselsystem{% endblock %}


{% block content %}
<section class="section">
    <div class="container is-max-desktop">

        <h1 class='title'>{{ person.get_full_name }}</h1>
        <div class="content">
            <p class='text'><strong>Gruppe: </strong>{{ person.group }}</p>
            <p class='text'><strong>Uni Mail: </strong> {{ person.university_email }}</p>
            <p class='text'><strong>Private Mail: </strong>{{ person.private_email }}</p>
            <p class='text'><strong>Telefon: </strong>{{ person.phone_number }}</p>
            <p class='text'><strong>Kaution:</strong>
            {% if person.deposit_paid %}
                <span class="tag is-success"><b>bezahlt</b></span>
            {% else %}
                <span class="tag is-light"><b>nicht bezahlt</b></span>
            {% endif %}</p>

            <h2 class="subtitle is-4">Aktuelle Schlüssselausleihen:</h2>
            <ul>
            {% for issue in person.issues.all %}
                <li><strong>Nr. {{ issue.key }}</strong> am {{ issue.out_date }}:
                   [{% for door in issue.key.get_access_doors.distinct %}<em>{{ door.room }}</em>{% if not forloop.last %}, {% endif %}{% empty %}keine.{% endfor %}]
                </li>
            {% empty %}
                keine.
            {% endfor %}
            </ul>
            <div class="buttons is-left">
                <a class="button is-link" href="{% url 'keys:person-list' %}">Zurück zur Liste</a>
            </div>
        </div>
    </div>
</section>

{% endblock %}
